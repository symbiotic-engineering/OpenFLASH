stages:
  _check-env-tex:
    cmd: calkit check environment --name tex
    deps: []
    outs:
      - .calkit/env-locks/tex.json:
          cache: false
          persist: true
    always_changed: true
    desc: Automatically generated by Calkit. Changes made here will be
      overwritten.
  _check-env-openflash-on-branch:
    cmd: calkit check environment --name openflash-on-branch
    deps:
      - analysis/environment-branch.yml
    outs:
      - .calkit/env-locks/openflash-on-branch.yml:
          cache: false
          persist: true
    always_changed: true
    desc: Automatically generated by Calkit. Changes made here will be
      overwritten.
  _check-env-openflash-on-main:
    cmd: calkit check environment --name openflash-on-main
    deps:
      - analysis/environment-main.yml
    outs:
      - .calkit/env-locks/openflash-on-main.yml:
          cache: false
          persist: true
    always_changed: true
    desc: Automatically generated by Calkit. Changes made here will be
      overwritten.
  generate-figs:
    cmd: calkit xenv -n openflash-on-main --no-check -- python 
      analysis/make_fig.py
    deps:
      - analysis/make_fig.py
      - package/src/
      - .calkit/env-locks/openflash-on-main.yml
    outs:
      - pubs/JFM/figs/sample_plot.png
    desc: Automatically generated from the 'generate-figs' stage in 
      calkit.yaml. Changes made here will be overwritten.
  _clean-nb-validate-w-capy:
    cmd: calkit nb clean 
      "analysis/validation_with_capytaine_plots.ipynb"
    deps:
      - analysis/validation_with_capytaine_plots.ipynb
    outs:
      - .calkit/notebooks/cleaned/analysis/validation_with_capytaine_plots.ipynb:
          cache: false
    desc: Automatically generated from the 'validate-w-capy' stage in 
      calkit.yaml. Changes made here will be overwritten.
  validate-w-capy:
    cmd: calkit nb execute --environment openflash-on-branch 
      --no-check --language python --to html 
      "analysis/validation_with_capytaine_plots.ipynb"
    deps:
      - .calkit/notebooks/cleaned/analysis/validation_with_capytaine_plots.ipynb
      - .calkit/env-locks/openflash-on-branch.yml
    outs:
      - .calkit/notebooks/executed/analysis/validation_with_capytaine_plots.ipynb:
          cache: true
      - .calkit/notebooks/html/analysis/validation_with_capytaine_plots.html:
          cache: true
    desc: Automatically generated from the 'validate-w-capy' stage in 
      calkit.yaml. Changes made here will be overwritten.
  _clean-nb-low-m0-figs:
    cmd: calkit nb clean "analysis/low_m0_plots.ipynb"
    deps:
      - analysis/low_m0_plots.ipynb
    outs:
      - .calkit/notebooks/cleaned/analysis/low_m0_plots.ipynb:
          cache: false
    desc: Automatically generated from the 'low-m0-figs' stage in 
      calkit.yaml. Changes made here will be overwritten.
  low-m0-figs:
    cmd: calkit nb execute --environment openflash-on-branch 
      --no-check --language python --to html 
      "analysis/low_m0_plots.ipynb"
    deps:
      - .calkit/notebooks/cleaned/analysis/low_m0_plots.ipynb
      - package/src/
      - dev/python/limiting-cases/low_m0.py
      - sea-lab-utils
      - .calkit/env-locks/openflash-on-branch.yml
    outs:
      - pubs/JFM/figs/MEEM-Low-Freq.pdf
      - .calkit/notebooks/executed/analysis/low_m0_plots.ipynb:
          cache: true
      - .calkit/notebooks/html/analysis/low_m0_plots.html:
          cache: true
    desc: Automatically generated from the 'low-m0-figs' stage in 
      calkit.yaml. Changes made here will be overwritten.
  _clean-nb-slant-figs:
    cmd: calkit nb clean "analysis/slant_data_plots.ipynb"
    deps:
      - analysis/slant_data_plots.ipynb
    outs:
      - .calkit/notebooks/cleaned/analysis/slant_data_plots.ipynb:
          cache: false
    desc: Automatically generated from the 'slant-figs' stage in 
      calkit.yaml. Changes made here will be overwritten.
  slant-figs:
    cmd: calkit nb execute --environment openflash-on-branch 
      --no-check --language python --to html 
      "analysis/slant_data_plots.ipynb"
    deps:
      - .calkit/notebooks/cleaned/analysis/slant_data_plots.ipynb
      - analysis/data/slants.pkl
      - sea-lab-utils
      - .calkit/env-locks/openflash-on-branch.yml
    outs:
      - pubs/JFM/figs/MEEM-CPT-Slant-Freq.pdf
      - pubs/JFM/figs/MEEM-CPT-Slant-Subdivisions.pdf
      - .calkit/notebooks/executed/analysis/slant_data_plots.ipynb:
          cache: true
      - .calkit/notebooks/html/analysis/slant_data_plots.html:
          cache: true
    desc: Automatically generated from the 'slant-figs' stage in 
      calkit.yaml. Changes made here will be overwritten.
  _clean-nb-timing-figs:
    cmd: calkit nb clean "analysis/timing_plots.ipynb"
    deps:
      - analysis/timing_plots.ipynb
    outs:
      - .calkit/notebooks/cleaned/analysis/timing_plots.ipynb:
          cache: false
    desc: Automatically generated from the 'timing-figs' stage in 
      calkit.yaml. Changes made here will be overwritten.
  timing-figs:
    cmd: calkit nb execute --environment openflash-on-branch 
      --no-check --language python --to html 
      "analysis/timing_plots.ipynb"
    deps:
      - .calkit/notebooks/cleaned/analysis/timing_plots.ipynb
      - analysis/data/timing.pkl
      - sea-lab-utils
      - .calkit/env-locks/openflash-on-branch.yml
    outs:
      - pubs/JFM/figs/MEEM-Comp-Distribution.pdf
      - pubs/JFM/figs/MEEM-CPT-Speed-Comparison.pdf
      - pubs/JFM/figs/MEEM-CPT-Time-Matrix-Comparison.pdf
      - .calkit/notebooks/executed/analysis/timing_plots.ipynb:
          cache: true
      - .calkit/notebooks/html/analysis/timing_plots.html:
          cache: true
    desc: Automatically generated from the 'timing-figs' stage in 
      calkit.yaml. Changes made here will be overwritten.
  compile-overleaf:
    cmd: calkit xenv -n tex --no-check -- latexmk -cd -norc 
      -interaction=nonstopmode -silent -synctex=1 -pdf 
      pubs/JFM/FLMguide.tex
    deps:
      - pubs/JFM/FLMguide.tex
      - pubs/JFM/FLMguide.tex
      - pubs/JFM/figs/
      - pubs/JFM/JFM-FLM_Au.cls
      - pubs/JFM/jfm.bib
      - pubs/JFM/jfm.bst
      - pubs/JFM/lineno-FLM.sty
      - pubs/JFM/zotero-meem-refs.bib
      - .calkit/env-locks/tex.json
    outs:
      - pubs/JFM/FLMguide.pdf
    desc: Automatically generated from the 'compile-overleaf' stage in
      calkit.yaml. Changes made here will be overwritten.
